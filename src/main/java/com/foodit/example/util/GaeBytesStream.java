package com.foodit.example.util;import org.elasticsearch.common.bytes.BytesArray;import org.elasticsearch.common.bytes.BytesReference;import org.elasticsearch.common.io.BytesStream;import org.elasticsearch.common.io.stream.StreamOutput;import java.io.ByteArrayOutputStream;import java.io.IOException;/** * An implementation of {@link BytesStream} that works for Elastic Search. The default version that ships with Elastic Search doesn't work on Google App Engine. */public class GaeBytesStream extends StreamOutput implements BytesStream {    private ByteArrayOutputStream bytes;    public GaeBytesStream(int expectedSize) {        bytes = new ByteArrayOutputStream(expectedSize);    }    @Override    public void writeByte(byte b) throws IOException {        bytes.write(b);    }    @Override    public void writeBytes(byte[] b, int offset, int length) throws IOException {        bytes.write(b, offset, length);    }    public void reset() {        bytes.reset();    }    @Override    public void flush() throws IOException {        bytes.flush();    }    @Override    public void close() throws IOException {        bytes.close();    }    public int size() {        return bytes.size();    }    @Override    public BytesReference bytes() {        return new BytesArray(bytes.toByteArray());    }}